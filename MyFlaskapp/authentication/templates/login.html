<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(rgba(255,255,255,0.0), rgba(255,255,255,0.6)), url("{{ url_for('static', filename='naruto_bg.png') }}") no-repeat center top;
            background-size: cover;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .page-wrap {
            min-height: 100%;
            display: flex;
            align-items: center; /* vertical center */
            justify-content: center; /* horizontal center */
            padding: 40px 20px;
            box-sizing: border-box;
        }
        .login-card {
            background: rgba(255,255,255,0.95);
            padding: 28px;
            width: 100%;
            max-width: 420px;
            border-radius: 10px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.18);
        }
        .alert { margin-bottom: 12px; padding: 10px 12px; border-radius: 6px; font-size: 0.95rem }
        .alert-success { background: #e6ffed; color: #1b6b2d; }
        .alert-fail { background: #ffe6e6; color: #7a1b1b; }
        label { font-weight: 600; display:block; margin-top:8px; }
        input[type="text"], input[type="password"] { width:100%; padding:8px 10px; margin-top:6px; box-sizing:border-box }
        input[type="submit"] { margin-top:12px; padding:8px 12px; cursor:pointer }
        @media (max-width:480px){
            .login-card{ padding:16px; max-width: 92%; }
        }
    </style>
    <audio id="success-snd" src="{{ url_for('static', filename='success.mp3') }}" preload="auto"></audio>
    <audio id="fail-snd" src="{{ url_for('static', filename='fail.mp3') }}" preload="auto"></audio>
</head>
<body>
    <div class="page-wrap">
        <div class="login-card" role="main" aria-labelledby="login-title">
        <h2>Login</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <form method="post">
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username"><br>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password"><br><br>
            <input type="submit" value="Login">
        </form>
        </div>
    </div>

    <script>
        // Play sounds based on flashed alert categories: 'success' or 'fail'
        (function(){
            const success = document.getElementById('success-snd');
            const fail = document.getElementById('fail-snd');
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(a => {
                if (a.classList.contains('alert-success')) {
                    success && success.play().catch(()=>{});
                } else if (a.classList.contains('alert-fail')) {
                    fail && fail.play().catch(()=>{});
                }
            });
        })();
    </script>
</body>
</html>
